<html lang="en">

<head>
    <title id="tab-title">Search</title>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Kalam&amp;display=swap" rel="stylesheet" />
</head>

<body>
    <script>
        window.addEventListener("load", (event) => {
            fetch("https://apoorlywrittenbot.cc/restricted/username", {
                method: 'GET'
            })
                .then(function (response) {
                    if (!response.ok) {
                        throw new Error("HTTP status " + response.status);
                    }
                    return response.json();
                })
                .then(function (data) {
                    let elem = document.getElementById("username");
                    elem.append(data["username"]);
                    return fetch(`https://apoorlywrittenbot.cc/restricted/emote-loader?user=${data["username"]}`);
                })
                .then(function (response) {
                    if (!response.ok) {
                        throw new Error("HTTP status " + response.status);
                    }
                    return response.json();
                })
        });

        function submitForm() {
            let searchBar = document.getElementById("searchBar");
            let searchBarHelp = document.getElementById("searchBarHelp");
            if (searchBar.value == "") {
                searchBarHelp.textContent = "Search bar cannot be empty.";
                searchBarHelp.style.color = "red";
                return;
            }

            window.location.href = `https://apoorlywrittenbot.cc/restricted/moderator?channel=${searchBar.value.toLowerCase()}`;
        }
    </script>
    <div class="container-fluid p-5">
        <h1 class="display-2 text-center" id="username" style="font-family: 'Kalam', cursive;">Hello, </h1>
        <form id="formElement" onsubmit="submitForm(); return false">
            <div class="mb-3">
                <label for="searchBar" class="form-label">Channel Name</label>
                <input type="text" class="form-control" id="searchBar" aria-describedby="searchBarHelp">
                <div id="searchBarHelp" class="form-text">Enter a channel name where you have moderator access.</div>
            </div>
            <button type="submit" class="btn btn-primary" id="searchButton">Submit</button>
        </form>
    </div>
</body>

</html>